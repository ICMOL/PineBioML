<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.5">
<title>PineBioML.IO API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>PineBioML.IO</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="PineBioML.IO.load_model"><code class="name flex">
<span>def <span class="ident">load_model</span></span>(<span>save_path: str, save_name: str = None) ‑> object</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def load_model(save_path: str, save_name: str = None) -&gt; object:
    &#34;&#34;&#34;
    Load a saved model.    

    If save_name was provided, load_model will try to access save_path/save_name .    
    else save_path will be regarded as save_path/save_name (lazy mode).    

    For example, a model saved as &#34;./output/model/best_model&#34;    
        load_model(&#34;./output/model/&#34;, &#34;best_model&#34;)    
        load_model(&#34;./output/model/best_model&#34;)    
    have exact the same result.

    Args:
        save_path (str): The path to folder where the model saved.
        save_name (str, optional): The name of target model. Defaults to None.

    Returns:
        object: An python object that was saved in previous. DO NOT TRUST UNKNOWN SOURCE PICKLE FILES.
    &#34;&#34;&#34;
    if not save_name is None:
        if not save_path[-1] == &#34;/&#34;:
            save_path = save_path + &#34;/&#34;

        return joblib.load(save_path + save_name)
    else:
        # lazy mode
        return joblib.load(save_path)</code></pre>
</details>
<div class="desc"><p>Load a saved model.
</p>
<p>If save_name was provided, load_model will try to access save_path/save_name .
<br>
else save_path will be regarded as save_path/save_name (lazy mode).
</p>
<p>For example, a model saved as "./output/model/best_model"
<br>
load_model("./output/model/", "best_model")
<br>
load_model("./output/model/best_model")
<br>
have exact the same result.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>save_path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to folder where the model saved.</dd>
<dt><strong><code>save_name</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>The name of target model. Defaults to None.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>object</code></dt>
<dd>An python object that was saved in previous. DO NOT TRUST UNKNOWN SOURCE PICKLE FILES.</dd>
</dl></div>
</dd>
<dt id="PineBioML.IO.read_file"><code class="name flex">
<span>def <span class="ident">read_file</span></span>(<span>file_path: str, index_col: int | str = None) ‑> pandas.core.frame.DataFrame | dict[str, pandas.core.frame.DataFrame]</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def read_file(
    file_path: str,
    index_col: Union[int,
                     str] = None) -&gt; Union[DataFrame, dict[str, DataFrame]]:
    &#34;&#34;&#34;
    Read files, which supports common data format .csv, .tsv, .xlsx and R-table in .txt format.    
    Notice that while an excel file has several data sheet, this function will return a python dict with corresponding sheet name as dict keys.    

    Args:
        file_path (str): The path of target file.
        index_col (Union[int, str], optional): The column index or name to set as the index of dataframe. Set None to ignore. Defaults to None.

    Returns:
        Union[DataFrame, dict[str, DataFrame]]: While the target file is an excel with more than one data sheet, it will return a dict consisting of the data sheets.
    &#34;&#34;&#34;

    # sparse csv, tsv or excel
    file_type = file_path.split(&#34;.&#34;)[-1]
    if file_type == &#34;csv&#34;:
        file = read_csv(file_path, index_col=index_col, engine=&#34;pyarrow&#34;)
    elif file_type == &#34;tsv&#34;:
        file_a = read_csv(file_path,
                          sep=&#34; &#34;,
                          index_col=index_col,
                          engine=&#34;pyarrow&#34;)
        file_b = read_csv(file_path,
                          sep=&#34;\t&#34;,
                          index_col=index_col,
                          engine=&#34;pyarrow&#34;)
        if file_a.isna().mean().mean() &gt; file_b.isna().mean().mean():
            file = file_b
        else:
            file = file_a

    elif file_type in [&#34;xls&#34;, &#34;xlsx&#34;, &#34;xlsm&#34;, &#34;xlsb&#34;]:
        file = read_excel(file_path, sheet_name=None, index_col=index_col)
        if len(file) == 1:
            file = file[list(file.keys())[0]]

    elif file_type == &#34;txt&#34;:
        file = read_table(file_path, index_col=index_col, engine=&#34;pyarrow&#34;)
    else:
        raise NotImplementedError(
            &#34;The type of target file is not supported. Must be one of .csv, .tsv, .xls, .xlsx or R table in .txt format.&#34;
        )
    return file</code></pre>
</details>
<div class="desc"><p>Read files, which supports common data format .csv, .tsv, .xlsx and R-table in .txt format.
<br>
Notice that while an excel file has several data sheet, this function will return a python dict with corresponding sheet name as dict keys.
</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>file_path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path of target file.</dd>
<dt><strong><code>index_col</code></strong> :&ensp;<code>Union[int, str]</code>, optional</dt>
<dd>The column index or name to set as the index of dataframe. Set None to ignore. Defaults to None.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Union[DataFrame, dict[str, DataFrame]]</code></dt>
<dd>While the target file is an excel with more than one data sheet, it will return a dict consisting of the data sheets.</dd>
</dl></div>
</dd>
<dt id="PineBioML.IO.read_multiple_groups"><code class="name flex">
<span>def <span class="ident">read_multiple_groups</span></span>(<span>file_path_list: list[str], transpose: bool = False, index_col: int | str = None) ‑> tuple[pandas.core.frame.DataFrame, pandas.core.series.Series]</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def read_multiple_groups(
        file_path_list: list[str],
        transpose: bool = False,
        index_col: Union[int, str] = None) -&gt; tuple[DataFrame, Series]:
    &#34;&#34;&#34;

    read_multiple_groups will do:    
        1. read files in    
        2. assign y according to the read-in order    
        3. concatenate all datas in row    
    It sould be used while the data was sperated into different files by their class or some kind of property we interested in.    

    Args:
        file_path_list (list[str]): A list of path to target files.
        transpose (bool, optional): Transpose before concatenating. Defaults to False.
        index_col (Union[int, str], optional): The column index or name to set as the index of dataframe. Set None to ignore. Defaults to None.

    Returns:
        tuple[DataFrame, Series]: A tuple (x, y) where x is the stacking of target files, and y is an array of integer which records each row&#39;s source in the order of file_path_list.    
    &#34;&#34;&#34;

    # 1. read files in
    datas = []
    group_label = []
    label = 0
    for path in file_path_list:
        group = read_file(path, index_col)
        if transpose:
            group = group.T

        datas.append(group)
        # 2. assign y according to the read-in order
        group_label.append(
            Series(ones(group.shape[0]) * label, index=group.index))
        label += 1

    # 3. concatenate all the datas in row
    x = concat(datas, axis=0)
    y = concat(group_label, axis=0)

    if not len(set(y.index)) == len(y.index):
        # if index repeats, drop them all.
        x = x.reset_index(drop=True)
        y = y.reset_index(drop=True)

    return x, y</code></pre>
</details>
<div class="desc"><p>read_multiple_groups will do:
<br>
1. read files in
<br>
2. assign y according to the read-in order
<br>
3. concatenate all datas in row
<br>
It sould be used while the data was sperated into different files by their class or some kind of property we interested in.
</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>file_path_list</code></strong> :&ensp;<code>list[str]</code></dt>
<dd>A list of path to target files.</dd>
<dt><strong><code>transpose</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>Transpose before concatenating. Defaults to False.</dd>
<dt><strong><code>index_col</code></strong> :&ensp;<code>Union[int, str]</code>, optional</dt>
<dd>The column index or name to set as the index of dataframe. Set None to ignore. Defaults to None.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple[DataFrame, Series]</code></dt>
<dd>A tuple (x, y) where x is the stacking of target files, and y is an array of integer which records each row's source in the order of file_path_list.</dd>
</dl></div>
</dd>
<dt id="PineBioML.IO.save_model"><code class="name flex">
<span>def <span class="ident">save_model</span></span>(<span>model_obj: object, save_path: str, save_name: str, overide: bool = False) ‑> None</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def save_model(model_obj: object,
               save_path: str,
               save_name: str,
               overide: bool = False) -&gt; None:
    &#34;&#34;&#34;
    Saving the model_obj by joblib in pickle format to the path: save_path/save_name .    
    If overide, then overide while any file with the same save_name has already existed in the save_path.

    Args:
        model_obj (object): The model or pipeline to be saved.
        save_path (str): The path to to save the model_obj.
        save_name (str): the saving filename.
        overide (bool, optional): True for overidind any file with save_name in save_path. Defaults to False.
    &#34;&#34;&#34;
    if not save_path[-1] == &#34;/&#34;:
        save_path = save_path + &#34;/&#34;

    if not os.path.exists(save_path):
        print(save_path, &#34; does not exist yet. we will try to create it.&#34;)
        os.makedirs(save_path)

    if os.path.exists(save_path + save_name):
        print(save_name, &#34; has already exist in &#34;, save_path)
        if overide:
            print(&#34;It will be overide.&#34;)
            joblib.dump(model_obj, save_path + save_name)
        else:
            print(
                &#34;please choose another model save_name or set overide to True which will replace the existing one&#34;
            )
    else:
        joblib.dump(model_obj, save_path + save_name)</code></pre>
</details>
<div class="desc"><p>Saving the model_obj by joblib in pickle format to the path: save_path/save_name .
<br>
If overide, then overide while any file with the same save_name has already existed in the save_path.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>model_obj</code></strong> :&ensp;<code>object</code></dt>
<dd>The model or pipeline to be saved.</dd>
<dt><strong><code>save_path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to to save the model_obj.</dd>
<dt><strong><code>save_name</code></strong> :&ensp;<code>str</code></dt>
<dd>the saving filename.</dd>
<dt><strong><code>overide</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>True for overidind any file with save_name in save_path. Defaults to False.</dd>
</dl></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="PineBioML" href="../index.html">PineBioML</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="PineBioML.IO.load_model" href="#PineBioML.IO.load_model">load_model</a></code></li>
<li><code><a title="PineBioML.IO.read_file" href="#PineBioML.IO.read_file">read_file</a></code></li>
<li><code><a title="PineBioML.IO.read_multiple_groups" href="#PineBioML.IO.read_multiple_groups">read_multiple_groups</a></code></li>
<li><code><a title="PineBioML.IO.save_model" href="#PineBioML.IO.save_model">save_model</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.5</a>.</p>
</footer>
</body>
</html>
